// console.log('This site was generated by Hugo.');

document.addEventListener('DOMContentLoaded', () => {
	const checker = document.getElementById("theme-switcher");
	const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

	let darkModeChecked = false;
	if (prefersDarkScheme.matches) {
		darkModeChecked = true;
	}

	const currentTheme = localStorage.getItem("theme");
	if (currentTheme == "dark") {
		darkModeChecked = true;
	} else if (currentTheme == "light") {
		darkModeChecked = false;
	}

	checker.checked = darkModeChecked;
	toggleSyntaxTheme(checker);

	checker.addEventListener("input", function() {
		localStorage.setItem("theme", checker.checked ? "dark" : "light" );
	});

	checker.addEventListener('input', () => {
		toggleSyntaxTheme(checker);
	});
});

function toggleSyntaxTheme(checker) {
	const darkSyntaxCSS = document.getElementById("syntax-dark");
	const lightSyntaxCSS = document.getElementById("syntax-light");

	if (checker.checked) {
		darkSyntaxCSS.removeAttribute("disabled");
		lightSyntaxCSS.setAttribute("disabled", "");
	} else {
		darkSyntaxCSS.setAttribute("disabled", "");
		lightSyntaxCSS.removeAttribute("disabled");
	}

}
